"use strict";(()=>{var e={};e.id=991,e.ids=[991],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},35816:e=>{e.exports=require("process")},6162:e=>{e.exports=require("worker_threads")},72254:e=>{e.exports=require("node:buffer")},6005:e=>{e.exports=require("node:crypto")},87561:e=>{e.exports=require("node:fs")},88849:e=>{e.exports=require("node:http")},22286:e=>{e.exports=require("node:https")},87503:e=>{e.exports=require("node:net")},49411:e=>{e.exports=require("node:path")},97742:e=>{e.exports=require("node:process")},84492:e=>{e.exports=require("node:stream")},72477:e=>{e.exports=require("node:stream/web")},41041:e=>{e.exports=require("node:url")},47261:e=>{e.exports=require("node:util")},65628:e=>{e.exports=require("node:zlib")},83510:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>q});var s={};r.r(s),r.d(s,{GET:()=>x,PATCH:()=>d});var o=r(49303),n=r(88716),i=r(60670),p=r(87070),u=r(96471);let a={};async function x(e){try{let{userId:e}=(0,u.I8)();if(!e)return new p.NextResponse("Unauthorized",{status:401});if(!a[e])return a[e]={id:e,points:0},p.NextResponse.json({points:0});return p.NextResponse.json({points:a[e].points})}catch(e){return console.error("[POINTS_GET]",e),new p.NextResponse("Internal Error",{status:500})}}async function d(e){try{let{userId:t}=(0,u.I8)();if(!t)return new p.NextResponse("Unauthorized",{status:401});a[t]||(a[t]={id:t,points:0});let{points:r,operation:s}=await e.json(),o=a[t];if(!o)return new p.NextResponse("User not found",{status:404});if("subtract"===s&&o.points<r)return new p.NextResponse("Insufficient points",{status:400});return"add"===s?a[t].points+=r:a[t].points-=r,p.NextResponse.json({points:a[t].points})}catch(e){return console.error("[POINTS_PATCH]",e),new p.NextResponse("Internal Error",{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/points/route",pathname:"/api/points",filename:"route",bundlePath:"app/api/points/route"},resolvedPagePath:"/home/user/XPulse/app/api/points/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:q,serverHooks:f}=c,h="/api/points/route";function m(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:q})}},49303:(e,t,r)=>{e.exports=r(30517)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[312],()=>r(83510));module.exports=s})();